<!DOCTYPE html>
<meta charset="utf-8">
<head>
	<script src="http://colorbrewer2.org/export/colorbrewer.js"></script>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/topojson.v1.min.js"></script>

<script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
<!-- start: JavaScript-->

    <script src="js/jquery-1.9.1.min.js"></script>
  <script src="js/jquery-migrate-1.0.0.min.js"></script>
  
    <script src="js/jquery-ui-1.10.0.custom.min.js"></script>
  
    <script src="js/jquery.ui.touch-punch.js"></script>
  
    <script src="js/modernizr.js"></script>
  
    <script src="js/bootstrap.min.js"></script>
  
    <script src="js/jquery.cookie.js"></script>
  
    <script src='js/fullcalendar.min.js'></script>
  
    <script src='js/jquery.dataTables.min.js'></script>

    <script src="js/excanvas.js"></script>
  <script src="js/jquery.flot.js"></script>
  <script src="js/jquery.flot.pie.js"></script>
  <script src="js/jquery.flot.stack.js"></script>
  <script src="js/jquery.flot.resize.min.js"></script>
  
    <script src="js/jquery.chosen.min.js"></script>
  
    <script src="js/jquery.uniform.min.js"></script>
    
    <script src="js/jquery.cleditor.min.js"></script>
  
    <script src="js/jquery.noty.js"></script>
  
    <script src="js/jquery.elfinder.min.js"></script>
  
    <script src="js/jquery.raty.min.js"></script>
  
    <script src="js/jquery.iphone.toggle.js"></script>
  
    <script src="js/jquery.uploadify-3.1.min.js"></script>
  
    <script src="js/jquery.gritter.min.js"></script>
  
    <script src="js/jquery.imagesloaded.js"></script>
  
    <script src="js/jquery.masonry.min.js"></script>
  
    <script src="js/jquery.knob.modified.js"></script>
  
    <script src="js/jquery.sparkline.min.js"></script>
  
    <script src="js/counter.js"></script>
  
    <script src="js/retina.js"></script>

    <script src="js/custom.js"></script>

    <script src="js/jquery-migrate-1.0.0.min.js"></script>
  
    <script src="js/jquery-ui-1.10.0.custom.min.js"></script>
  
    <script src="js/jquery.ui.touch-punch.js"></script>
  
    <script src="js/modernizr.js"></script>
  
    <script src="js/bootstrap.min.js"></script>
  
    <script src="js/jquery.cookie.js"></script>
  
    <script src='js/fullcalendar.min.js'></script>
  
    <script src='js/jquery.dataTables.min.js'></script>

    <script src="js/excanvas.js"></script>
  <script src="js/jquery.flot.js"></script>
  <script src="js/jquery.flot.pie.js"></script>
  <script src="js/jquery.flot.stack.js"></script>
  <script src="js/jquery.flot.resize.min.js"></script>
  
    <script src="js/jquery.chosen.min.js"></script>
  
    <script src="js/jquery.uniform.min.js"></script>
    
    <script src="js/jquery.cleditor.min.js"></script>
  
    <script src="js/jquery.noty.js"></script>
  
    <script src="js/jquery.elfinder.min.js"></script>
  
    <script src="js/jquery.raty.min.js"></script>
  
    <script src="js/jquery.iphone.toggle.js"></script>
  
    <script src="js/jquery.uploadify-3.1.min.js"></script>
  
    <script src="js/jquery.gritter.min.js"></script>
  
    <script src="js/jquery.imagesloaded.js"></script>
  
    <script src="js/jquery.masonry.min.js"></script>
  
    <script src="js/jquery.knob.modified.js"></script>
  
    <script src="js/jquery.sparkline.min.js"></script>
  
    <script src="js/counter.js"></script>
  
    <script src="js/retina.js"></script>

    <script src="js/custom.js"></script>
</head>
<style>


.canton-boundary {
  fill: none;
  stroke: #fff;
  stroke-linejoin: round;
}

text {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 10px;
  text-anchor: middle;
}


.d3-tip {
			  line-height: 1;
			  font-weight: bold;
			  padding: 12px;
			  background: black;
			  color: #fff;
			  border-radius: 2px;
			  opacity: 0.001%;
			}
			.d3-tip:after {
			  box-sizing: border-box;
			  display: inline;
			  font-size: 10px;
			  width: 100%;
			  line-height: 1;
			  color: black;
			  content: "\25BC";
			  position: absolute;
			  text-align: center;
			  opacity: 0.001%;
			}

			.d3-tip.n:after {
			  margin: -1px 0 0 0;
			  top: 100%;
			  left: 0;
			  opacity: 0.001%;
			}
			.area:hover {
				fill: brown;
			}
			.legend {
            padding: 5px;
            font: 10px sans-serif;
            background: yellow;
            box-shadow: 2px 2px 1px #888;
        }
			
</style>
<body>
	


	</script>


					<div id = "map" style = "float : left; min-width:320px;width :50%;height : 600px"> 
						<div id="subtitle"></div>
							</div>
							  
				     		   
	  

<script>


 $(document).ready(function() {
 	var places1 =[];var places2 =[];var places3 =[];var places4 =[];var places5 =[];var places6 =[];var places7 =[];
 	var places8 =[];var places9 =[];var places10 =[];var places11 =[];var places12 =[];var places13 =[];var places14=[];  var places15 =[];var places16 =[]; var places17 =[];var places18 =[];
 
  
    $.ajax({
        type: "GET",
        url: "1970-79-locations.csv",
        dataType: "text",
        success: function(data) {processData(data);}
     });
     
	

 function processData(allText) {
		
   var allTextLines = allText.split(/\r\n|\n/);
    
    for (var i=0; i<allTextLines.length; i++) 
    {
        var data = allTextLines[i].split(',');
        if(data[1]!="Unknown" && data[2]!="Unknown")
     	{
     		var mydata ={
     		name :String(data[0]),
     		location: {
     			latitude:data[1],
     			longitude:data[2]
     		}
     	};
     /*	
     **


Unknown
Business
Educational Institution
Government 
Police
Private Citizens & Property
Transportation
Violent Political Party
Religious Figures/Institutions
Military
Telecommunication
Utilities
NGO
Journalists & Media
Food or Water Supply
Airports & Aircraft
Tourists
     **
     */
     if(data[4]=="Unknown")
     {
     	places1.push(mydata);
     	
     }
 	else if(data[4]=="Business")
     {
     	places2.push(mydata);
     }
     else if(data[4]=="Educational Institution")
     {
     	places3.push(mydata);
     }
     else if(data[4]=="Government")
     {
     	places4.push(mydata);
     }
     else if(data[4]=="Police")
     {
     	places5.push(mydata);
     }
     else if(data[4]=="Private Citizens & Property")
     {
     	places6.push(mydata);
     }
     else if(data[4]=="Transportation")
     {
     	places7.push(mydata);
     }
     else if(data[4]=="Violent Political Party")
     {
     	places8.push(mydata);
     }
     
     else if(data[4]=="Religious Figures/Institutions")
     {
      places9.push(mydata);
     }
     else if(data[4]=="Military")
     {
      places10.push(mydata);
     }
     else if(data[4]=="Telecommunication")
     {
      places11.push(mydata);
     }
     else if(data[4]=="Utilities")
     {
      places12.push(mydata);
     }
     else if(data[4]=="NGO")
     {
      places13.push(mydata);
     }
     else if(data[4]=="Journalists & Media")
     {
      places14.push(mydata);
     }
     else if(data[4]=="Food or Water Supply")
     {
      places15.push(mydata);
     }
     else if(data[4]=="Airports & Aircraft")
     {
      places16.push(mydata);
     }
     else if(data[4]=="Tourists")
     {
      places17.push(mydata);
     }
     else
     {
      places18.push(mydata);
     }
     	
      // add.push(String(allTextLines[i]));
       //console.log(places);
   }
    }



var projection = d3.geo.mercator().scale(1100).translate([-1000,800]);
var path = d3.geo.path()
    .projection(projection);

var svg = d3.select("#map").append("svg")
    .attr("viewBox", "0 0 900 800")
	 .attr("preserveAspectRatio", "xMidYMid meet");
var data;
d3.json("test.json", function(error, swiss) {
  if (error) throw error;

  var cantons = topojson.feature(swiss, swiss.objects.india);
  
  			//svg.call(tip);
			var group=svg.selectAll("g")
				.data(cantons.features)
				.enter()
				.append("g");
				//.on('mouseover', tip.show)
      			//.on('mouseout', tip.hide)
					
					
					var tip = d3.tip()
							.attr('class', 'd3-tip')
							.offset([-5, 0])
							.style("left", "300px")
							.style("top", "400px")
							.html(function(d) {
								return ("<a href="+d.nam+" target='_blank'>"+d.name +"</a>");
							})
							
						svg.call(tip);

//
						svg.selectAll(".pin")
						  .data(places1)
						  .enter().append("circle", ".pin")

						  .attr("r", 5)
						  .style("fill", "apricot")
    						.style("stroke", "black")
						  .attr("transform", function(d) {
							return "translate(" + projection([
							  d.location.longitude,
							  d.location.latitude
							]) + ")";
						  })
						   .on('mouseover', tip.show)
							.on('click', tip.hide);


							svg.selectAll(".pin")
						  .data(places2)
						  .enter().append("circle", ".pin")
						  .attr("r", 5)
						  .style("fill", "aqua")
    						.style("stroke", "black")
						  .attr("transform", function(d) {
							return "translate(" + projection([
							  d.location.longitude,
							  d.location.latitude
							]) + ")";
						  })
						   .on('mouseover', tip.show)
							.on('click', tip.hide);		

							svg.selectAll(".pin")
						  .data(places3)
						  .enter().append("circle", ".pin")
						  .attr("r", 5)
						  .style("fill", "black")
    						.style("stroke", "black")
						  .attr("transform", function(d) {
							return "translate(" + projection([
							  d.location.longitude,
							  d.location.latitude
							]) + ")";
						  })
						   .on('mouseover', tip.show)
							.on('click', tip.hide);


svg.selectAll(".pin")
						  .data(places4)
						  .enter().append("circle", ".pin")
						  .attr("r", 5)
						  .style("fill", "blue")
    						.style("stroke", "black")
						  .attr("transform", function(d) {
							return "translate(" + projection([
							  d.location.longitude,
							  d.location.latitude
							]) + ")";
						  })
						   .on('mouseover', tip.show)
							.on('click', tip.hide);


svg.selectAll(".pin")
						  .data(places5)
						  .enter().append("circle", ".pin")
						  .attr("r", 5)
						  .style("fill", "blueviolet")
    						.style("stroke", "black")
						  .attr("transform", function(d) {
							return "translate(" + projection([
							  d.location.longitude,
							  d.location.latitude
							]) + ")";
						  })
						   .on('mouseover', tip.show)
							.on('click', tip.hide);


svg.selectAll(".pin")
						  .data(places6)
						  .enter().append("circle", ".pin")
						  .attr("r", 5)
						  .style("fill", "brown")
    						.style("stroke", "black")
						  .attr("transform", function(d) {
							return "translate(" + projection([
							  d.location.longitude,
							  d.location.latitude
							]) + ")";
						  })
						   .on('mouseover', tip.show)
							.on('click', tip.hide);


svg.selectAll(".pin")
						  .data(places7)
						  .enter().append("circle", ".pin")
						  .attr("r", 5)
						  .style("fill", "cyan")
    						.style("stroke", "black")
						  .attr("transform", function(d) {
							return "translate(" + projection([
							  d.location.longitude,
							  d.location.latitude
							]) + ")";
						  })
						   .on('mouseover', tip.show)
							.on('click', tip.hide);


svg.selectAll(".pin")
						  .data(places8)
						  .enter().append("circle", ".pin")
						  .attr("r", 5)
						  .style("fill", "green")
    						.style("stroke", "black")
						  .attr("transform", function(d) {
							return "translate(" + projection([
							  d.location.longitude,
							  d.location.latitude
							]) + ")";
						  })
						   .on('mouseover', tip.show)
							.on('click', tip.hide);


svg.selectAll(".pin")
						  .data(places9)
						  .enter().append("circle", ".pin")
						  .attr("r", 5)
						  .style("fill", "grey")
    						.style("stroke", "black")
						  .attr("transform", function(d) {
							return "translate(" + projection([
							  d.location.longitude,
							  d.location.latitude
							]) + ")";
						  })
						   .on('mouseover', tip.show)
							.on('click', tip.hide);

svg.selectAll(".pin")
              .data(places10)
              .enter().append("circle", ".pin")
              .attr("r", 5)
              .style("fill", "plum")
                .style("stroke", "black")
              .attr("transform", function(d) {
              return "translate(" + projection([
                d.location.longitude,
                d.location.latitude
              ]) + ")";
              })
               .on('mouseover', tip.show)
              .on('click', tip.hide);

svg.selectAll(".pin")
              .data(places11)
              .enter().append("circle", ".pin")
              .attr("r", 5)
              .style("fill", "red")
                .style("stroke", "black")
              .attr("transform", function(d) {
              return "translate(" + projection([
                d.location.longitude,
                d.location.latitude
              ]) + ")";
              })
               .on('mouseover', tip.show)
              .on('click', tip.hide);

svg.selectAll(".pin")
              .data(places12)
              .enter().append("circle", ".pin")
              .attr("r", 5)
              .style("fill", "yellow")
                .style("stroke", "black")
              .attr("transform", function(d) {
              return "translate(" + projection([
                d.location.longitude,
                d.location.latitude
              ]) + ")";
              })
               .on('mouseover', tip.show)
              .on('click', tip.hide);

svg.selectAll(".pin")
              .data(places13)
              .enter().append("circle", ".pin")
              .attr("r", 5)
              .style("fill", "lavendar")
                .style("stroke", "black")
              .attr("transform", function(d) {
              return "translate(" + projection([
                d.location.longitude,
                d.location.latitude
              ]) + ")";
              })
               .on('mouseover', tip.show)
              .on('click', tip.hide);

svg.selectAll(".pin")
              .data(places14)
              .enter().append("circle", ".pin")
              .attr("r", 5)
              .style("fill", "chartreuse")
                .style("stroke", "black")
              .attr("transform", function(d) {
              return "translate(" + projection([
                d.location.longitude,
                d.location.latitude
              ]) + ")";
              })
               .on('mouseover', tip.show)
              .on('click', tip.hide);

svg.selectAll(".pin")
              .data(places15)
              .enter().append("circle", ".pin")
              .attr("r", 5)
              .style("fill", "crimson")
                .style("stroke", "black")
              .attr("transform", function(d) {
              return "translate(" + projection([
                d.location.longitude,
                d.location.latitude
              ]) + ")";
              })
               .on('mouseover', tip.show)
              .on('click', tip.hide);

svg.selectAll(".pin")
              .data(places16)
              .enter().append("circle", ".pin")
              .attr("r", 5)
              .style("fill", "darkgreen")
                .style("stroke", "black")
              .attr("transform", function(d) {
              return "translate(" + projection([
                d.location.longitude,
                d.location.latitude
              ]) + ")";
              })
               .on('mouseover', tip.show)
              .on('click', tip.hide);

svg.selectAll(".pin")
              .data(places17)
              .enter().append("circle", ".pin")
              .attr("r", 5)
              .style("fill", "orange")
                .style("stroke", "black")
              .attr("transform", function(d) {
              return "translate(" + projection([
                d.location.longitude,
                d.location.latitude
              ]) + ")";
              })
               .on('mouseover', tip.show)
              .on('click', tip.hide);

svg.selectAll(".pin")
              .data(places18)
              .enter().append("circle", ".pin")
              .attr("r", 5)
              .style("fill", "pink")
                .style("stroke", "black")
              .attr("transform", function(d) {
              return "translate(" + projection([
                d.location.longitude,
                d.location.latitude
              ]) + ")";
              })
               .on('mouseover', tip.show)
              .on('click', tip.hide);


						 	
					
				//var projection = d3.geo.mercator().scale(900).translate([-600,700]);
				var path= d3.geo.path().projection(projection);

				var areas= group.append("path")
					.attr("d", path)
					.attr("class", "area")
				 .attr("fill","steelblue");

				 

var legend = svg.append("g")
  .attr("class", "legend")
  .attr("x", 65)
  .attr("y", 25)
  .attr("height", 1000)
  .attr("width", 400);

legend.append("rect")
  .attr("x",65)
  .attr("y", 25)
  .attr("width", 40)
  .attr("height", 40)
  .style("fill", "apricot");

  legend.append("text")
  .attr("x",  130)
  .attr("y", 25)
  .text("Unknown");


  legend.append("rect")
  .attr("x",65)
  .attr("y", 65)
  .attr("width", 40)
  .attr("height", 40)
  .style("fill", "aqua");

  legend.append("text")
  .attr("x",  130)
  .attr("y", 65)
  .text("Business");


  legend.append("rect")
  .attr("x",65)
  .attr("y", 105)
  .attr("width", 40)
  .attr("height", 40)
  .style("fill", "black");

  legend.append("text")
  .attr("x",  130)
  .attr("y", 105)
  .text("Educational Institution");

  legend.append("rect")
  .attr("x",65)
  .attr("y", 145)
  .attr("width", 40)
  .attr("height", 40)
  .style("fill", "blue");

  legend.append("text")
  .attr("x",  130)
  .attr("y", 145)
  .text("Government");

  legend.append("rect")
  .attr("x",65)
  .attr("y", 185)
  .attr("width", 40)
  .attr("height", 40)
  .style("fill", "blueviolet");

  legend.append("text")
  .attr("x",  130)
  .attr("y", 185)
  .text("Police");

  legend.append("rect")
  .attr("x",65)
  .attr("y", 225)
  .attr("width", 40)
  .attr("height", 40)
  .style("fill", "brown");

  legend.append("text")
  .attr("x",  130)
  .attr("y", 225)
  .text("Private Citizens & Property");

  legend.append("rect")
  .attr("x",65)
  .attr("y", 265)
  .attr("width", 40)
  .attr("height", 40)
  .style("fill", "cyan");

  legend.append("text")
  .attr("x",  130)
  .attr("y", 265)
  .text("Transportation");

  legend.append("rect")
  .attr("x",65)
  .attr("y", 305)
  .attr("width", 40)
  .attr("height", 40)
  .style("fill", "green");

  legend.append("text")
  .attr("x",  130)
  .attr("y", 305)
  .text("Violent Political Party");


  legend.append("rect")
  .attr("x", 65)
  .attr("y", 345)
  .attr("width", 40)
  .attr("height", 40)
  .style("fill", "grey");

  legend.append("text")
  .attr("x",  130)
  .attr("y", 345)
  .text("Religious Figures/Institutions");



  legend.append("rect")
  .attr("x", 65)
  .attr("y", 385)
  .attr("width", 40)
  .attr("height", 40)
  .style("fill", "plum");

  legend.append("text")
  .attr("x",  130)
  .attr("y", 385)
  .text("Military");



  legend.append("rect")
  .attr("x", 65)
  .attr("y", 425)
  .attr("width", 40)
  .attr("height", 40)
  .style("fill", "red");

  legend.append("text")
  .attr("x",  130)
  .attr("y", 425)
  .text("Telecommunication");



  legend.append("rect")
  .attr("x", 65)
  .attr("y", 465)
  .attr("width", 40)
  .attr("height", 40)
  .style("fill", "yellow");

  legend.append("text")
  .attr("x",  130)
  .attr("y", 465)
  .text("Utilities");



  legend.append("rect")
  .attr("x", 65)
  .attr("y", 505)
  .attr("width", 40)
  .attr("height", 40)
  .style("fill", "lavendar");

  legend.append("text")
  .attr("x",  130)
  .attr("y", 505)
  .text("NGO");



  legend.append("rect")
  .attr("x", 65)
  .attr("y", 545)
  .attr("width", 40)
  .attr("height", 40)
  .style("fill", "chartreuse");

  legend.append("text")
  .attr("x",  130)
  .attr("y", 545)
  .text("Journalists & Media");



  legend.append("rect")
  .attr("x", 65)
  .attr("y", 585)
  .attr("width", 40)
  .attr("height", 40)
  .style("fill", "crimson");

  legend.append("text")
  .attr("x",  130)
  .attr("y", 585)
  .text("Food or Water Supply");



  legend.append("rect")
  .attr("x", 65)
  .attr("y", 605)
  .attr("width", 40)
  .attr("height", 40)
  .style("fill", "darkgreen");

  legend.append("text")
  .attr("x",  130)
  .attr("y", 605)
  .text("Airports & Aircraft");



  legend.append("rect")
  .attr("x", 65)
  .attr("y", 645)
  .attr("width", 40)
  .attr("height", 40)
  .style("fill", "orange");

  legend.append("text")
  .attr("x",  130)
  .attr("y", 645)
  .text("Tourists");



  legend.append("rect")
  .attr("x", 65)
  .attr("y", 685)
  .attr("width", 40)
  .attr("height", 40)
  .style("fill", "pink");

  legend.append("text")
  .attr("x",  130)
  .attr("y", 685)
  .text("Others");



						
});

}


}); 

</script>


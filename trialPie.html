<!DOCTYPE html>
<html lang="en">
<head>
    
    <!-- start: Meta -->
    <meta charset="utf-8">
    <title>Visual Analytics of Terrorism Data</title>
    <meta name="description" content="Bootstrap Metro Dashboard">
    <meta name="author" content="Dennis Ji">
    <meta name="keyword" content="Metro, Metro UI, Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">
    <!-- end: Meta -->
    
    <!-- start: Mobile Specific -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- end: Mobile Specific -->
    
    <!-- start: CSS -->
    <link id="bootstrap-style" href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap-responsive.min.css" rel="stylesheet">
    <link id="base-style" href="css/style.css" rel="stylesheet">
    <link id="base-style-responsive" href="css/style-responsive.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800&subset=latin,cyrillic-ext,latin-ext' rel='stylesheet' type='text/css'>
    <!-- end: CSS -->
    

    <!-- The HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
        <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <link id="ie-style" href="css/ie.css" rel="stylesheet">
    <![endif]-->
    
    <!--[if IE 9]>
        <link id="ie9style" href="css/ie9.css" rel="stylesheet">
    <![endif]-->
        
    <!-- start: Favicon -->
    <link rel="shortcut icon" href="img/favicon.ico">
    <!-- end: Favicon -->
    
    <style>
    #chartdiv {
  width: 100%;
  height: 500px;
  font-size: 11px;
}

.amcharts-pie-slice {
  transform: scale(1);
  transform-origin: 50% 50%;
  transition-duration: 0.3s;
  transition: all .3s ease-out;
  -webkit-transition: all .3s ease-out;
  -moz-transition: all .3s ease-out;
  -o-transition: all .3s ease-out;
  cursor: pointer;
  box-shadow: 0 0 30px 0 #000;
}

.amcharts-pie-slice:hover {
  transform: scale(1.1);
  filter: url(#shadow);
}                           
    </style>
    
        
</head>

<body>
        <!-- start: Header -->
    <div class="navbar">
        <div class="navbar-inner">
            <div class="container-fluid">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".top-nav.nav-collapse,.sidebar-nav.nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <a class="brand" href="index.html"><span>Visual Analytics of Terrorism Data</span></a>
                                
                <!-- start: Header Menu -->
                <div class="nav-no-collapse header-nav">
                    <ul class="nav pull-right">
                         <!-- start: User Dropdown -->
                        <li class="dropdown">
                            <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                                <i class="halflings-icon white user"></i> Admin
                                <span class="caret"></span>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a href="login.html"><i class="halflings-icon off"></i> Logout</a></li>
                            </ul>
                        </li>
                        <!-- end: User Dropdown -->
                    </ul>
                </div>
                <!-- end: Header Menu -->
                
            </div>
        </div>
    </div>
    <!-- start: Header -->
    
        <div class="container-fluid-full">
        <div class="row-fluid">
                
            <!-- start: Main Menu -->
            <div id="sidebar-left" class="span2">
                <div class="nav-collapse sidebar-nav">
                    <ul class="nav nav-tabs nav-stacked main-menu">
                        <li><a href="index.html"><i class="icon-bar-chart"></i><span class="hidden-tablet"> Dashboard</span></a></li>   
                       <!--
                        <li><a href="1970-79.html"><i class="icon-file-alt"></i><span class="hidden-tablet"> 1970-79</span></a></li>
                        <li><a href="1980-89.html"><i class="icon-file-alt "></i><span class="hidden-tablet"> 1980-89</span></a></li>
                        <li><a href="1990-99.html"><i class="icon-file-alt"></i><span class="hidden-tablet"> 1990-99</span></a></li>
                        <li><a href="2000-09.html"><i class="icon-file-alt"></i><span class="hidden-tablet"> 2000-09</span></a></li>
                        <li><a href="2010-14.html"><i class="icon-file-alt"></i><span class="hidden-tablet"> 2010-14</span></a></li>-->
                        <li><a href="login.html"><i class="icon-lock"></i><span class="hidden-tablet"> Login Page</span></a></li>
                    </ul>
                </div>
            </div>
            <!-- end: Main Menu -->
            
            <noscript>
                <div class="alert alert-block span10">
                    <h4 class="alert-heading">Warning!</h4>
                    <p>You need to have <a href="http://en.wikipedia.org/wiki/JavaScript" target="_blank">JavaScript</a> enabled to use this site.</p>
                </div>
            </noscript>
            
            <!-- start: Content -->
            <div id="content" class="span10">
            
            
            <ul class="breadcrumb">
                <li>
                    <i class="icon-home"></i>
                    <a href="index.html">Home</a> 
                    <i class="icon-angle-right"></i>
                </li>
                <li><a href="#">1970-79</a></li>
            </ul>
<div class="row pull-right well">    
            <div class="btn-group">

                            <button class="btn btn-large">Select Decade</button>
                            <button class="btn btn-large dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></button>
                            <ul class="dropdown-menu" data-class="decade">
                                <li data-value ="one"><i class="halflings-icon calendar"></i> 1970-79</a></li>
                                <li data-value ="two"><i class="halflings-icon calendar"></i> 1980-89</a></li>
                                <li data-value ="three"><i class="halflings-icon calendar"></i> 1990-99</a></li>
                                <li data-value ="four"><i class="halflings-icon calendar"></i> 2000-09</a></li>
                                <li data-value ="five"><i class="halflings-icon calendar"></i>2010-14</a></li>
                                
                                
                            </ul>

                           
            </div>

            <div class="btn-group">

                            <button class="btn btn-large">Select Type of Analysis</button>
                            <button class="btn btn-large dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></button>
                            <ul class="dropdown-menu" data-class="type">
                                <li data-value ="pie"><i class="halflings-icon calendar"></i> Pie Chart</a></li>
                                <li data-value ="map"><i class="halflings-icon calendar"></i> Map</a></li>
                                <li data-value ="network"><i class="halflings-icon calendar"></i> Network Visualization</a></li>
                                  
                            </ul>

                           
            </div>

            <div class="btn-group ">
            <button class="btn btn-large">Select Criteria</button>
                            <button class="btn btn-large dropdown-toggle" data-toggle="dropdown"><span class="caret"></span></button>
                            <ul class="dropdown-menu" data-class= "criteria">
                                <li data-value ="attack"><i class="fa-pie-chart "></i>Attack Type</a></li>
                                <li data-value ="city"><i class="fa-pie-chart "></i>Cities</a></li>
                                <li data-value ="gname"><i class="fa-pie-chart "></i>Terrorist Groups</a></li>
                                <li data-value ="target"><i class="fa-pie-chart "></i>Target Type</a></li>
                              <!--  <li data-value ="india_map_max_attack"><i class="halflings-icon white download-alt"></i>Map For Max Attacks</a></li>
                                <li data-value =="india_map"><i class="halflings-icon white download-alt"></i> Map For Attacks</a></li>
                                <li data-value ="india_map_target-1"><i class="halflings-icon white download-alt"></i> Map For Targets</a></li>
                                <li data-value ="city-target"><i class="halflings-icon white download-alt"></i> City-Target</a></li>
                                <li data-value ="city-attack"><i class="halflings-icon white download-alt"></i> City-Attack</a></li>
                                <li data-value ="gname-attack"><i class="halflings-icon white download-alt"></i> Gname-Attack</a></li>
                                <li data-value ="gname-location"><i class="halflings-icon white download-alt"></i> Gname-Location</a></li>-->
                                
                            </ul>
            </div>
            </div>
            
            <div id="chartdiv"></div>  
       

    </div><!--/.fluid-container-->
    
            <!-- end: Content -->
        </div><!--/#content.span10-->
        </div><!--/fluid-row-->
        
    
    
    <div class="clearfix"></div>
    
    <footer>

        <p>
            <span style="text-align:left;float:left">&copy; 2016 </span>
            
        </p>

    </footer>
    
    <!-- start: JavaScript-->

  <script src="https://www.amcharts.com/lib/3/amcharts.js"></script>
<script src="https://www.amcharts.com/lib/3/pie.js"></script>
<script src="https://www.amcharts.com/lib/3/themes/light.js"></script>
        
      

        <script src="js/jquery-1.9.1.min.js"></script>
    <script src="js/jquery-migrate-1.0.0.min.js"></script>
    
        <script src="js/jquery-ui-1.10.0.custom.min.js"></script>
    
        <script src="js/jquery.ui.touch-punch.js"></script>
    
        <script src="js/modernizr.js"></script>
    
        <script src="js/bootstrap.min.js"></script>
    
        <script src="js/jquery.cookie.js"></script>
    
        <script src='js/fullcalendar.min.js'></script>
    
        <script src='js/jquery.dataTables.min.js'></script>

        <script src="js/excanvas.js"></script>
    <script src="js/jquery.flot.js"></script>
    <script src="js/jquery.flot.pie.js"></script>
    <script src="js/jquery.flot.stack.js"></script>
    <script src="js/jquery.flot.resize.min.js"></script>
    
        <script src="js/jquery.chosen.min.js"></script>
    
        <script src="js/jquery.uniform.min.js"></script>
        
        <script src="js/jquery.cleditor.min.js"></script>
    
        <script src="js/jquery.noty.js"></script>
    
        <script src="js/jquery.elfinder.min.js"></script>
    
        <script src="js/jquery.raty.min.js"></script>
    
        <script src="js/jquery.iphone.toggle.js"></script>
    
        <script src="js/jquery.uploadify-3.1.min.js"></script>
    
        <script src="js/jquery.gritter.min.js"></script>
    
        <script src="js/jquery.imagesloaded.js"></script>
    
        <script src="js/jquery.masonry.min.js"></script>
    
        <script src="js/jquery.knob.modified.js"></script>
    
        <script src="js/jquery.sparkline.min.js"></script>
    
        <script src="js/counter.js"></script>
    
        <script src="js/retina.js"></script>

        <script src="js/custom.js"></script>
        <script type"text/javascript">
        var decade;
        var type;
        var criteria;
        var servfile;
        var loc;

        $(".btn-group .dropdown-menu[data-class='decade']").click(function(event){
            decade = $(event.target).attr("data-value");
            console.log(decade);
           
        });
        $(".btn-group .dropdown-menu[data-class='type']").click(function(event){
            type = $(event.target).attr("data-value");
            console.log(type);
                switch(type)
            {
                case "pie": servfile = "pie.php"; loc = "pie.html";
                    break;
              /*  case "india_map_max_attack": servfile = "json_return.php"; loc = "map_max_attack.html";
                    break;
                case "india_map": servfile = "json_return.php"; loc = "map.html";
                    break;
                case "india_map_target": servfile = "json_return.php"; loc = "map_target.html";
                    break;
                case "city-target": servfile = "json_return.php";
                    break;
                case "city-attack": servfile = "json_return.php";
                    break;
                case "gname-attack": servfile = "json_return.php";
                    break;
                case "gname-location": servfile = "json_return.php";
                    break;*/
            }
            
            });

        $(".btn-group .dropdown-menu[data-class='criteria']").click(function(event){
            criteria = $(event.target).attr("data-value");
            console.log(criteria);
            console.log(servfile);
            console.log(loc);
            var data = {
"decade": decade,
"type": type,
"criteria": criteria

};

console.log(data);
$.ajax({
type: "POST",
dataType: "json",
url: servfile, //Relative or absolute path to response.php file
data: data,
success: function(data) {
alert("Returned json: " + JSON.parse(data));

//data = JSON.stringify(data);
   //creates a base-64 encoded ASCII string
 // data = btoa(data);
   //save the encoded accout to web storage
   localStorage.setItem('data', data);
window.location.replace(loc);

}
});

           
        
        
       // var file = decade+"-"+charttype;
       //console.log(file);

});
$(document).ready(function(){
    
    
    response = localStorage.getItem('data');
    //console.log( response);
  var chart = AmCharts.makeChart("chartdiv", {
  "type": "pie",
  "startDuration": 0,
   "theme": "light",
  "addClassNames": true,
  "legend":{
    "position":"right",
    "marginRight":100,
    "autoMargins":false
  },
  "innerRadius": "30%",
  "defs": {
    "filter": [{
      "id": "shadow",
      "width": "200%",
      "height": "200%",
      "feOffset": {
        "result": "offOut",
        "in": "SourceAlpha",
        "dx": 0,
        "dy": 0
      },
      "feGaussianBlur": {
        "result": "blurOut",
        "in": "offOut",
        "stdDeviation": 5
      },
      "feBlend": {
        "in": "SourceGraphic",
        "in2": "blurOut",
        "mode": "normal"
      }
    }]
  },

  "dataProvider": JSON.parse(localStorage.getItem('data')),
  "valueField": "count",
  "titleField": "name",
  "export": {
    "enabled": true
  }
});

chart.addListener("init", handleInit);

chart.addListener("rollOverSlice", function(e) {
  handleRollOver(e);
});

function handleInit(){
  chart.legend.addListener("rollOverItem", handleRollOver);
}

function handleRollOver(e){
  var wedge = e.dataItem.wedge.node;
  wedge.parentNode.appendChild(wedge);  
}

});
</script>
    <!-- end: JavaScript-->
    
</body>
</html>
